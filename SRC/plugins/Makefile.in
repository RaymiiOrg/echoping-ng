SUBDIRS=@subdirs@
DISTFILES=configure configure.ac Makefile.plugins.in Makefile.in

all:
ifneq (${SUBDIRS},)
	@for subdir in ${SUBDIRS}; do \
		(cd $$subdir && ${MAKE} HAVE_CONFIG_H=1 $@) \
	done
endif

install:
ifneq (${SUBDIRS},)
	test -d @plugins_dir@ || mkdir @plugins_dir@
	@for subdir in ${SUBDIRS}; do \
		(cd $$subdir && ${MAKE} $@) \
	done
endif

configure: configure.ac
	autoconf

distdir: configure
	test -d ${top_distdir}/plugins || mkdir ${top_distdir}/plugins
	cp ${DISTFILES} ${top_distdir}/plugins

ifneq (${SUBDIRS},)
	@for subdir in ${SUBDIRS}; do \
		(cd $$subdir && ${MAKE} $@) \
	done
endif

clean:
ifneq (${SUBDIRS},)
	@for subdir in ${SUBDIRS}; do \
		(cd $$subdir && ${MAKE} $@) \
	done
endif

distclean: clean
ifneq (${SUBDIRS},)
	@for subdir in ${SUBDIRS}; do \
		(cd $$subdir && ${MAKE} $@) \
	done
endif
	rm -f Makefile Makefile.plugins

# TODO: distclean and clean
