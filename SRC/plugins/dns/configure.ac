dnl $Id$

m4_include([../../configure-common.ac])
AM_INIT_AUTOMAKE(foreign)
AC_CONFIG_HEADERS(config.h)

m4_include([../configure-plugins.ac])

DNS_BUILD=1
AC_CHECK_FUNCS(poptGetContext,, 
   [AC_CHECK_LIB(popt,poptGetContext,,[AC_MSG_WARN([No popt development environment found, not building this plugin]) && DNS_BUILD=0])])
if test "$DNS_BUILD" != "0"; then
 AC_CHECK_FUNC(res_mkquery, , 
  [AC_CHECK_LIB(bind, res_mkquery, , 
   [AC_CHECK_LIB(resolv, res_mkquery, , 
        [AC_MSG_ERROR([No DNS resolver development environment found, not building this plugin]) && DNS_BUILD=0])])])
fi

AM_CONDITIONAL(DNSBUILD, test "$DNS_BUILD" = 1)
AC_OUTPUT(Makefile)

